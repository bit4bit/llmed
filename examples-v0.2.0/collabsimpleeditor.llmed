set_llm provider: :openai, api_key: ENV['OPENAI_API_KEY'], model: 'gpt-4o-mini'
set_language :ruby

application "Collaborative SIMPLE Editor", release: 2, language: :ruby, output_file: "collabsimpleeditor.ollmed" do
  context "dependencies" do
    <<-LLM
    Must use GTK.
    Don't use deprecated functions.
    LLM
  end

  context "UI layout" do
    <<-LLM
    Classical text editor:
    - Top menu
    - Input area
    LLM
  end

  context "application" do
    <<-LLM
    Description of the top menu:
    - File
      - New
        - Clean the input area.
      - Open
        - ask for the source path in the filesystem and load the content into the input.
      - Save
        - ask for the destination path in the filesystem and save the input content.
      - Listening
        - when click start listening at localhost:3635 reusing the port if necessary, after receiving the incoming text and update the input content.
        - shows the user in the console when a incoming text is received.
      - Connect
        - when click connect to the port localhost:3635 and send the input content after every change.
        - shows the user in the console when an text was sent.
    - View
      - Font Size (12 15 20 25)
        - when click change font size of input area.
    - About
      - LLMed when click popup message 'Compiled with LLMed\nhttps://github.com/bit4bit/llm-labs'.

     Randomize GTK application id.
    LLM
  end
end
